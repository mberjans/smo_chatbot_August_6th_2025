# Clinical Metabolomics Fallback System Configuration Template
# =======================================================
# Copy this file to clinical_metabolomics.env and customize for your deployment
# Optimized settings for biomedical query processing and scientific accuracy

# ========================================
# ENVIRONMENT AND DEPLOYMENT SETTINGS
# ========================================

# Deployment environment (development, staging, production)
ENVIRONMENT=production

# Clinical accuracy level (diagnostic, therapeutic, research, educational, general)
CLINICAL_ACCURACY_LEVEL=research

# Enable clinical metabolomics optimizations
CLINICAL_METABOLOMICS_MODE=true

# ========================================
# LIGHTRAG CONFIGURATION FOR CLINICAL USE
# ========================================

# Model configuration (optimized for scientific content)
LIGHTRAG_MODEL=gpt-4o
LIGHTRAG_EMBEDDING_MODEL=text-embedding-3-large
LIGHTRAG_MAX_TOKENS=32768
LIGHTRAG_MAX_ASYNC=8

# Timeout settings (extended for scientific complexity)
LIGHTRAG_INTEGRATION_TIMEOUT_SECONDS=45.0
LIGHTRAG_COMPLEX_QUERY_TIMEOUT_SECONDS=60.0
LIGHTRAG_LITERATURE_SEARCH_TIMEOUT_SECONDS=90.0

# Quality and accuracy settings (higher for biomedical)
LIGHTRAG_MIN_QUALITY_THRESHOLD=0.80
LIGHTRAG_RELEVANCE_CONFIDENCE_THRESHOLD=75.0
LIGHTRAG_RELEVANCE_MINIMUM_THRESHOLD=60.0

# ========================================
# CONFIDENCE THRESHOLDS (CLINICAL GRADE)
# ========================================

# Primary confidence thresholds (higher for biomedical accuracy)
CLINICAL_DIAGNOSTIC_CONFIDENCE_THRESHOLD=0.90
CLINICAL_THERAPEUTIC_CONFIDENCE_THRESHOLD=0.85
CLINICAL_RESEARCH_CONFIDENCE_THRESHOLD=0.75
CLINICAL_EDUCATIONAL_CONFIDENCE_THRESHOLD=0.65
CLINICAL_GENERAL_CONFIDENCE_THRESHOLD=0.60

# Fallback decision thresholds
LIGHTRAG_FALLBACK_THRESHOLD=0.70
PERPLEXITY_FALLBACK_THRESHOLD=0.60
EMERGENCY_CACHE_THRESHOLD=0.40

# Quality assessment thresholds
MINIMUM_SCIENTIFIC_ACCURACY=0.80
CITATION_QUALITY_THRESHOLD=0.75
FACTUAL_ACCURACY_THRESHOLD=0.85

# Uncertainty-aware thresholds
HIGH_UNCERTAINTY_THRESHOLD=0.30
MEDIUM_UNCERTAINTY_THRESHOLD=0.20
LOW_UNCERTAINTY_THRESHOLD=0.10

# ========================================
# CIRCUIT BREAKER CONFIGURATION
# ========================================

# Circuit breaker settings (stricter for clinical applications)
LIGHTRAG_ENABLE_CIRCUIT_BREAKER=true
LIGHTRAG_CIRCUIT_BREAKER_FAILURE_THRESHOLD=2
LIGHTRAG_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=300.0

# Cost-based circuit breaker
ENABLE_COST_BASED_CIRCUIT_BREAKER=true
COST_BREAKER_TIMEOUT_SECONDS=600.0

# ========================================
# PERPLEXITY API CONFIGURATION
# ========================================

# Perplexity timeouts (for scientific queries)
PERPLEXITY_STANDARD_TIMEOUT=35.0
PERPLEXITY_SCIENTIFIC_TIMEOUT=50.0
PERPLEXITY_MAX_REQUESTS_PER_MINUTE=100

# Perplexity fallback settings
LIGHTRAG_FALLBACK_TO_PERPLEXITY=true

# ========================================
# RELIABILITY AND SAFETY SETTINGS
# ========================================

# Failure tolerance (stricter for clinical applications)
MAX_CONSECUTIVE_FAILURES=2
FAILURE_RATE_THRESHOLD=0.05
QUALITY_DEGRADATION_THRESHOLD=0.15

# Recovery settings
AUTO_RECOVERY_ENABLED=true
RECOVERY_VALIDATION_SAMPLES=5
RECOVERY_SUCCESS_THRESHOLD=0.85

# Safety mechanisms
ENABLE_CITATION_VERIFICATION=true
REQUIRE_SOURCE_ATTRIBUTION=true
ENABLE_FACT_CHECKING=true

# ========================================
# CACHING CONFIGURATION
# ========================================

# Cache settings for metabolomics queries
ENABLE_CACHE_WARMING=true
CACHE_REFRESH_INTERVAL_HOURS=24
CACHE_SIZE_LIMIT=1000
CACHE_TTL_HOURS=72

# Pre-warm cache with common metabolomics queries
METABOLOMICS_CACHE_QUERIES="what is clinical metabolomics,metabolomics biomarkers for diabetes,LC-MS methods in metabolomics,GC-MS metabolomics analysis,metabolomics data preprocessing,clinical metabolomics applications,metabolomics pathway analysis,biomarker discovery metabolomics,metabolomics quality control,untargeted metabolomics workflow"

# ========================================
# MONITORING AND ALERTING
# ========================================

# Real-time monitoring (enhanced for clinical use)
ENABLE_REAL_TIME_MONITORING=true
HEALTH_CHECK_INTERVAL_SECONDS=30
PERFORMANCE_TRACKING_ENABLED=true

# Alert thresholds
ALERT_ON_ACCURACY_DROP=true
ALERT_THRESHOLD_ACCURACY=0.80
ALERT_THRESHOLD_FAILURE_RATE=0.05
ALERT_THRESHOLD_RESPONSE_TIME_MS=67500

# Monitoring timeouts
HEALTH_CHECK_TIMEOUT=15.0
SYSTEM_MONITORING_TIMEOUT=5.0

# ========================================
# COST MANAGEMENT
# ========================================

# Cost tracking and budgets (conservative for clinical use)
LIGHTRAG_ENABLE_COST_TRACKING=true
LIGHTRAG_DAILY_BUDGET_LIMIT=500.0
LIGHTRAG_MONTHLY_BUDGET_LIMIT=15000.0
LIGHTRAG_COST_ALERT_THRESHOLD=75.0
LIGHTRAG_ENABLE_BUDGET_ALERTS=true

# Cost persistence
LIGHTRAG_COST_PERSISTENCE_ENABLED=true
LIGHTRAG_COST_DB_PATH=cost_tracking.db

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Logging levels and settings
LIGHTRAG_LOG_LEVEL=INFO
LIGHTRAG_ENABLE_FILE_LOGGING=true
LIGHTRAG_LOG_MAX_BYTES=10485760
LIGHTRAG_LOG_BACKUP_COUNT=10

# Audit trail (required for clinical applications)
LIGHTRAG_ENABLE_AUDIT_TRAIL=true
ENABLE_STRUCTURED_LOGGING=true

# ========================================
# FEATURE FLAGS
# ========================================

# Core feature flags
LIGHTRAG_INTEGRATION_ENABLED=true
LIGHTRAG_ENABLE_AB_TESTING=false
LIGHTRAG_ENABLE_QUALITY_METRICS=true
LIGHTRAG_ENABLE_PERFORMANCE_COMPARISON=true

# Advanced features
ENABLE_RELEVANCE_SCORING=true
ENABLE_PARALLEL_RELEVANCE_PROCESSING=true
RELEVANCE_SCORING_MODE=comprehensive

# Research categorization
LIGHTRAG_ENABLE_RESEARCH_CATEGORIZATION=true

# ========================================
# ROUTING AND CLASSIFICATION
# ========================================

# Router decision timeouts
ROUTER_DECISION_TIMEOUT_MS=5000
CONFIDENCE_ANALYSIS_TIMEOUT_MS=10000
FALLBACK_ACTIVATION_TIMEOUT_MS=2000

# Classification settings
ENABLE_LLM_CLASSIFICATION=true
ENABLE_KEYWORD_CLASSIFICATION=true
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.7

# ========================================
# DEGRADATION STRATEGIES
# ========================================

# Progressive timeout reduction
ENABLE_PROGRESSIVE_TIMEOUT_REDUCTION=true
TIMEOUT_REDUCTION_FACTOR=0.8
MINIMUM_TIMEOUT_SECONDS=10.0

# Quality threshold adjustment
ENABLE_QUALITY_THRESHOLD_ADJUSTMENT=true
QUALITY_ADJUSTMENT_FACTOR=0.9

# Load shedding
ENABLE_LOAD_SHEDDING=true
LOAD_SHEDDING_THRESHOLD=0.8
PRIORITY_QUERIES=diagnostic,therapeutic

# ========================================
# SCIENTIFIC LITERATURE PROCESSING
# ========================================

# Scientific processing parameters
CHUNK_SIZE_SCIENTIFIC=2048
CHUNK_OVERLAP_SCIENTIFIC=256
MAX_SEARCH_RESULTS=20
SIMILARITY_THRESHOLD=0.75

# Scientific validation
ENABLE_SCIENTIFIC_VALIDATION=true
REQUIRE_PEER_REVIEW_SOURCES=false
ENABLE_CITATION_EXTRACTION=true

# Reranking and optimization
RERANK_RESULTS=true
ENABLE_QUERY_EXPANSION=true

# ========================================
# API KEYS AND SECURITY
# ========================================

# API Keys (set these securely)
# OPENAI_API_KEY=sk-...
# PERPLEXITY_API_KEY=pplx-...

# Security settings
ENABLE_API_KEY_ROTATION=false
API_KEY_VALIDATION_ENABLED=true

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=200
RATE_LIMIT_BURST=20

# ========================================
# DEVELOPMENT AND DEBUG SETTINGS
# ========================================

# Debug settings (disable in production)
DEBUG_MODE=false
ENABLE_REQUEST_TRACING=false
ENABLE_PERFORMANCE_PROFILING=false
VERBOSE_ERROR_LOGGING=true

# Testing flags (for development/staging)
ENABLE_SYNTHETIC_DATA=false
BYPASS_COST_LIMITS=false
FORCE_FALLBACK_TESTING=false

# ========================================
# NOTIFICATION ENDPOINTS (OPTIONAL)
# ========================================

# Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/...
# SLACK_CHANNEL=#clinical-metabolomics-alerts

# Email notifications
# EMAIL_SMTP_HOST=smtp.example.com
# EMAIL_SMTP_PORT=587
# EMAIL_SMTP_USER=alerts@example.com
# EMAIL_RECIPIENTS=ops@example.com,clinical-team@example.com

# Webhook notifications
# ALERT_WEBHOOK_URL=https://monitoring.example.com/alerts
# METRICS_WEBHOOK_URL=https://analytics.example.com/metrics