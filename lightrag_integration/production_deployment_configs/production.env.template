# Production Load Balancer Environment Configuration Template
# Copy this file to .env and customize for your deployment

# ==============================
# PRODUCTION LOAD BALANCER FLAGS
# ==============================

# Enable production load balancer (true/false)
PROD_LB_ENABLED=false

# Deployment mode: legacy_only, production_only, a_b_testing, canary, shadow
PROD_LB_DEPLOYMENT_MODE=legacy_only

# Traffic percentage to production system (0-100)
PROD_LB_TRAFFIC_PERCENT=0

# Enable performance comparison between legacy and production
PROD_LB_PERF_COMPARISON=true

# Enable automatic failback on errors
PROD_LB_AUTO_FAILBACK=true

# Enable advanced load balancing algorithms
PROD_LB_ADVANCED_ALGORITHMS=false

# Enable cost optimization features
PROD_LB_COST_OPTIMIZATION=false

# Enable quality metrics collection
PROD_LB_QUALITY_METRICS=true

# Automatic rollback thresholds
PROD_LB_ROLLBACK_ERROR_RATE=5.0
PROD_LB_ROLLBACK_LATENCY_MS=5000.0

# Maximum canary deployment duration (hours)
PROD_LB_CANARY_MAX_HOURS=24

# ==============================
# PRODUCTION LOAD BALANCER CONFIG
# ==============================

# Backend configurations
PROD_LB_LIGHTRAG_ENDPOINT=http://localhost:8080
PROD_LB_PERPLEXITY_ENDPOINT=https://api.perplexity.ai
PROD_LB_OPENAI_ENDPOINT=https://api.openai.com/v1

# Health monitoring
PROD_LB_HEALTH_CHECK_INTERVAL=30
PROD_LB_HEALTH_TIMEOUT=10
PROD_LB_UNHEALTHY_THRESHOLD=3
PROD_LB_HEALTHY_THRESHOLD=2

# Circuit breaker settings
PROD_LB_CB_FAILURE_THRESHOLD=5
PROD_LB_CB_SUCCESS_THRESHOLD=3
PROD_LB_CB_TIMEOUT=300

# Performance thresholds
PROD_LB_MAX_RESPONSE_TIME_MS=5000
PROD_LB_TARGET_RESPONSE_TIME_MS=2000
PROD_LB_MAX_CONCURRENT_REQUESTS=100

# Algorithm configuration
PROD_LB_PRIMARY_ALGORITHM=weighted_round_robin
PROD_LB_ENABLE_ADAPTIVE=true
PROD_LB_FALLBACK_ALGORITHMS=least_connections,response_time_based,health_aware

# ==============================
# MONITORING AND ALERTING
# ==============================

# Monitoring configuration
PROD_LB_ENABLE_MONITORING=true
PROD_LB_METRICS_RETENTION_HOURS=168
PROD_LB_MONITORING_INTERVAL=60

# Alert thresholds
PROD_LB_ALERT_ERROR_RATE=2.0
PROD_LB_ALERT_LATENCY_MS=3000
PROD_LB_ALERT_QUEUE_SIZE=50

# Notification endpoints (optional)
# PROD_LB_SLACK_WEBHOOK=https://hooks.slack.com/...
# PROD_LB_EMAIL_SMTP_HOST=smtp.example.com
# PROD_LB_EMAIL_RECIPIENTS=admin@example.com,ops@example.com

# ==============================
# COST OPTIMIZATION
# ==============================

# Cost tracking
PROD_LB_COST_TRACKING_ENABLED=true
PROD_LB_DAILY_BUDGET_USD=100.0
PROD_LB_ALERT_THRESHOLD_USD=80.0

# Cost-based routing
PROD_LB_PREFER_LOW_COST_BACKENDS=false
PROD_LB_COST_WEIGHT_FACTOR=0.3

# ==============================
# SECURITY
# ==============================

# API Keys (set these securely)
# OPENAI_API_KEY=sk-...
# PERPLEXITY_API_KEY=pplx-...

# Rate limiting
PROD_LB_RATE_LIMIT_RPM=1000
PROD_LB_RATE_LIMIT_BURST=50

# ==============================
# LOGGING AND DEBUG
# ==============================

# Logging configuration
PROD_LB_LOG_LEVEL=INFO
PROD_LB_LOG_FORMAT=json
PROD_LB_LOG_FILE=/var/log/production_load_balancer.log

# Debug settings
PROD_LB_DEBUG_MODE=false
PROD_LB_TRACE_REQUESTS=false
PROD_LB_ENABLE_PROFILING=false