[tool:pytest]
# Pytest configuration for feature flag comprehensive testing

minversion = 6.0

# Test discovery patterns
testpaths = lightrag_integration/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Add current directory to Python path
pythonpath = .

# Markers for test categorization
markers =
    unit: Unit tests
    integration: Integration tests
    performance: Performance tests
    slow: Slow running tests
    concurrent: Concurrent execution tests
    async: Asynchronous tests
    lightrag: LightRAG integration tests
    biomedical: Biomedical-specific functionality tests
    feature_flags: Feature flag system tests
    edge_cases: Edge case and boundary tests
    stress: Stress and load tests

# Async testing configuration
asyncio_mode = auto

# Output configuration
addopts = 
    -v
    --tb=short
    --strict-markers
    --strict-config
    --color=yes
    --durations=10
    --showlocals
    --capture=no

# Performance test configuration
performance_timeout = 30
slow_test_timeout = 60

# Coverage configuration (if pytest-cov is installed)
# --cov=lightrag_integration
# --cov-report=html:htmlcov
# --cov-report=term-missing
# --cov-fail-under=90

# Filter warnings
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning:lightrag.*
    ignore::PendingDeprecationWarning

# Logging configuration during tests
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = logs/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d - %(funcName)s(): %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Test timeout (requires pytest-timeout)
timeout = 300
timeout_method = thread

# Parallel testing configuration (requires pytest-xdist)
# -n auto (for parallel execution)

# Memory profiling (requires pytest-memray)
# --memray

# Test order randomization (requires pytest-randomly)
# --randomly-seed=<seed>
# --randomly-dont-reorganize